<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <link rel="stylesheet" th:href="@{/css/app.css}">
</head>
<body>
<div class="wrap">
    <div class="topbar">
        <a th:href="@{/appointments}">Back</a>
        <h1>Appt Form</h1>
    </div>
    <div class="card">
        <form class="form"
              th:action="${appointment.id} != null ? @{/appointments/{id}(id=${appointment.id})} : @{/appointments}"
              th:object="${appointment}"
              method="post">

            <div>
                <label>Date</label>
                <input type="date" th:field="*{admissionDate}">
                <div th:if="${#fields.hasErrors('admissionDate')}" th:errors="*{admissionDate}">Err</div>
            </div>

            <div>
                <label>Patient</label>
                <select th:field="*{patient}">
                    <option th:each="p : ${patients}" th:value="${p.id}" th:text="${p.name}"></option>
                </select>
            </div>

            <div>
                <label>Dept</label>
                <select th:field="*{department}">
                    <option th:each="d : ${departments}" th:value="${d.id}" th:text="${d.name}"></option>
                </select>
            </div>

            <div>
                <label>Room</label>
                <select th:field="*{room}">
                    <option th:each="r : ${rooms}" th:value="${r.id}" th:text="${r.number}"></option>
                </select>
            </div>

            <div>
                <label>Doctor</label>
                <select th:field="*{doctor}">
                    <option th:each="d : ${doctors}" th:value="${d.id}" th:text="${d.name}"></option>
                </select>
            </div>

            <div>
                <label>Nurse</label>
                <select th:field="*{nurse}">
                    <option th:each="n : ${nurses}" th:value="${n.id}" th:text="${n.name}"></option>
                </select>
            </div>

            <div>
                <label>Status</label>
                <select th:field="*{status}">
                    <option th:each="s : ${statuses}" th:value="${s}" th:text="${s}"></option>
                </select>
            </div>

            <button type="submit">Save</button>
        </form>
    </div>
</div>
</body>
</html>